
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Operation: Smooth</title>
  <meta name="author" content="Avi Halachmi (:avih)">

  
  <meta name="description" content="When your manager does your work for you, it&#8217;s a bit like a kick in the ass. With an iron boot. A spiked one. As I don&#8217;t generaly find &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://avih.github.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Operation: Smooth" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Asap' rel='stylesheet' type='text/css'>


  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Operation: Smooth</a></h1>
  
    <h2>Mozilla performance notes from a personal perspective</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:avih.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/28/initial-post/">Help Wanted - Slow Touchpad Scroll in Firefox?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-28T07:13:00+02:00" pubdate data-updated="true">Feb 28<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/02/28/initial-post/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When your manager does your work <a href="http://taras.glek.net/blog/2013/02/22/snappy-number-51-smoothing-tab-animations/">for you</a>, it&#8217;s a bit like a kick in the ass. With an iron boot. A spiked one. As I don&#8217;t generaly find those too amusing, I&#8217;ve finally opened this blog. You can read a bit about me <a href="/about">here</a>. Welcome aboard.</p>

<p>Since I recently joined the performance team at Mozilla, I&#8217;ve been working on animation smoothness, starting with tab animation, but touching related subjects as well.</p>

<p>In this space, I hope to provide interesting progress notes on this and related subjects.</p>

<p>So let&#8217;s get to business.</p>

<p>When I became aware of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=829952">bug 829952</a> (Scrolling using touchpad feels slow on some laptops), I jumped in (leather boot, hopefully the last).</p>

<p>Turns out that due to many laptops and touchpads manufacturers, different drivers, OS configurations etc, it&#8217;s quite hard to provide a consistent scroll experience on the various platforms which Firefox supports. We could have provided some (or a lot of) configuration UI, but the best solution would be to get it as good as possible out of the box.</p>

<p>And to do that, we need data - and you might be able to help.</p>

<p>My my system (Asus laptop, Elantech touchpad, Windows 7), the touchpad does produce pixel-accurate scroll in Firefox, but doesn&#8217;t send its events as true pixel data (WM_GESTURES windows event). Instead, it sends mouse wheel events, but very rapidly and with fractional line values (it&#8217;s a legitimate approach with <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms645617%28v=vs.85%29.aspx">WM_MOUSEWHEEL</a>). This results in Firefox processing it through the &#8220;mouse wheel path&#8221;, even when the frequency and value of the events allow pixel-accurate positioning of the content.</p>

<p>It was interesting to compare how this kind of event is handled on other browsers, and so I wrote a cross-browser testcase which measures <a href="/testcases/mozwheel-test-v4.html">just that</a>. The best way to use it is to scroll (e.g. two fingers scroll) consistently from top to bottom of the touch pad. After each such scroll, the page displays related events values, and the overall scrolled distance (pageYOffset). Repeat this few times untill you can consistently get similar results. Then, try this with other browsers.</p>

<p>On my system, if Firefox scroll x pixels for one top-to-bottom two-fingers swipe, then, for the same swipe:<br/>
- Chrome scrolls 1.7x<br/>
- IE scrolls 6x<br/>
- Opera scrolls 13x</p>

<p>Quite a difference, with the numbers (consistently) all over the place. For me, Opera scrolls way too fast (does it treat every fractional mouse wheel event as a full line request?), Firefox scrolls slower than I&#8217;d like. Chrome could also be faster, and IE feels a bit too fast for my taste.</p>

<p>How do the browsers compare on your system (Linux? OSX? Windows?)? Is firefox considerably slower than the rest? If you have a bugzilla account, you can post directly at the <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=829952">bug</a>, otherwise, you&#8217;re welcome to post here.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/02/28/initial-post/">Help wanted - Slow touchpad scroll in Firefox?</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Avi Halachmi (:avih) -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mozilla-avih';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
